{
    "name": "decision_workflow",
    "description": "包含 DECISION 分支的工作流，支持嵌套任务",
    "version": 1,
    "tasks": [
        {
            "name": "check_user_type",
            "taskReferenceName": "check_user_ref",
            "type": "SIMPLE",
            "inputParameters": {
                "userId": "${workflow.input.userId}"
            }
        },
        {
            "name": "user_type_decision",
            "taskReferenceName": "decision_ref",
            "type": "DECISION",
            "inputParameters": {
                "userType": "${check_user_ref.output.userType}"
            },
            "caseValueParam": "userType",
            "decisionCases": {
                "premium": [
                    {
                        "name": "premium_processing",
                        "taskReferenceName": "premium_proc_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "level": "premium",
                            "userId": "${workflow.input.userId}"
                        }
                    },
                    {
                        "name": "send_premium_email",
                        "taskReferenceName": "premium_email_ref",
                        "type": "HTTP",
                        "inputParameters": {
                            "http_request": {
                                "uri": "https://api.example.com/email/premium",
                                "method": "POST",
                                "body": {
                                    "userId": "${workflow.input.userId}",
                                    "template": "premium"
                                }
                            }
                        }
                    }
                ],
                "standard": [
                    {
                        "name": "standard_processing",
                        "taskReferenceName": "standard_proc_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "level": "standard",
                            "userId": "${workflow.input.userId}"
                        }
                    }
                ],
                "trial": [
                    {
                        "name": "trial_processing",
                        "taskReferenceName": "trial_proc_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "level": "trial",
                            "userId": "${workflow.input.userId}"
                        }
                    },
                    {
                        "name": "check_trial_expiry",
                        "taskReferenceName": "trial_expiry_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "userId": "${workflow.input.userId}"
                        }
                    }
                ]
            },
            "defaultCase": [
                {
                    "name": "default_processing",
                    "taskReferenceName": "default_proc_ref",
                    "type": "SIMPLE",
                    "inputParameters": {
                        "level": "unknown",
                        "userId": "${workflow.input.userId}"
                    }
                },
                {
                    "name": "log_unknown_user",
                    "taskReferenceName": "log_unknown_ref",
                    "type": "EVENT",
                    "inputParameters": {
                        "event": "unknown_user_type",
                        "userId": "${workflow.input.userId}"
                    }
                }
            ]
        },
        {
            "name": "final_notification",
            "taskReferenceName": "final_notify_ref",
            "type": "SIMPLE",
            "inputParameters": {
                "message": "Workflow completed"
            }
        }
    ],
    "inputParameters": [
        "userId"
    ],
    "outputParameters": {
        "result": "${final_notify_ref.output}"
    },
    "schemaVersion": 2,
    "ownerEmail": "team@example.com"
}