{
    "name": "fork_join_workflow",
    "description": "包含 FORK_JOIN 并行任务的工作流",
    "version": 1,
    "tasks": [
        {
            "name": "prepare_data",
            "taskReferenceName": "prepare_ref",
            "type": "SIMPLE",
            "inputParameters": {
                "orderId": "${workflow.input.orderId}"
            }
        },
        {
            "name": "parallel_processing",
            "taskReferenceName": "fork_join_ref",
            "type": "FORK_JOIN",
            "forkTasks": [
                [
                    {
                        "name": "process_payment",
                        "taskReferenceName": "payment_ref",
                        "type": "HTTP",
                        "inputParameters": {
                            "http_request": {
                                "uri": "https://api.example.com/payment",
                                "method": "POST",
                                "body": {
                                    "orderId": "${workflow.input.orderId}",
                                    "amount": "${prepare_ref.output.amount}"
                                }
                            }
                        }
                    },
                    {
                        "name": "validate_payment",
                        "taskReferenceName": "validate_payment_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "paymentId": "${payment_ref.output.paymentId}"
                        }
                    }
                ],
                [
                    {
                        "name": "update_inventory",
                        "taskReferenceName": "inventory_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "orderId": "${workflow.input.orderId}",
                            "items": "${prepare_ref.output.items}"
                        }
                    }
                ],
                [
                    {
                        "name": "send_confirmation_email",
                        "taskReferenceName": "email_ref",
                        "type": "HTTP",
                        "inputParameters": {
                            "http_request": {
                                "uri": "https://api.example.com/email",
                                "method": "POST",
                                "body": {
                                    "to": "${prepare_ref.output.customerEmail}",
                                    "template": "order_confirmation"
                                }
                            }
                        }
                    },
                    {
                        "name": "send_sms",
                        "taskReferenceName": "sms_ref",
                        "type": "SIMPLE",
                        "inputParameters": {
                            "phone": "${prepare_ref.output.customerPhone}",
                            "message": "Order confirmed"
                        }
                    }
                ]
            ]
        },
        {
            "name": "finalize_order",
            "taskReferenceName": "finalize_ref",
            "type": "SIMPLE",
            "inputParameters": {
                "orderId": "${workflow.input.orderId}",
                "paymentStatus": "${payment_ref.output.status}",
                "inventoryStatus": "${inventory_ref.output.status}"
            }
        }
    ],
    "inputParameters": [
        "orderId"
    ],
    "outputParameters": {
        "result": "${finalize_ref.output}"
    },
    "schemaVersion": 2,
    "ownerEmail": "team@example.com"
}